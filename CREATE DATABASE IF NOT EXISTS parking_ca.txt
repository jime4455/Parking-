CREATE DATABASE IF NOT EXISTS parking_car CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE parking_car;

INSERT INTO vehicle_types (code,name) VALUES ('IB','Motorbike'),('IC','Car'),('TR','Transport');

CREATE TABLE IF NOT EXISTS vehicle_types (
  id INT AUTO_INCREMENT PRIMARY KEY,
  code VARCHAR(10) NOT NULL UNIQUE,
  name VARCHAR(100) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE IF NOT EXISTS vehicles (
  id CHAR(36) PRIMARY KEY,          -- UUID
  ref_code VARCHAR(20) NOT NULL UNIQUE,
  plate VARCHAR(50) NOT NULL,
  type_id INT NOT NULL,
  owner_name VARCHAR(200) NOT NULL,
  phone VARCHAR(50),
  price DECIMAL(10,2) DEFAULT 0,
  note TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (type_id) REFERENCES vehicle_types(id) ON DELETE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE `login` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(50) NOT NULL UNIQUE,
  `password` VARCHAR(255) NOT NULL,
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;